<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>gCoder - 3D Printer Controller</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- p5.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <!-- Include Navbar -->
  <%- include('partials/navbar') %>
  
  <!-- p5.js Script (if needed for custom visuals) -->
  <script>
    // Initialize p5.js if needed
    // For this example, we won't be using p5.js, but it's included for future extensions.
    function setup() {
      // No canvas needed
      noCanvas();
    }
    function loop() {}
  </script>

  <div class="container">
    <h1 class="mb-4">3D Printer Controller</h1>

    <!-- Serial Connection Section -->
    <div class="mb-4">
      <button id="connectButton" class="btn btn-primary">Connect to Printer</button>
      <span id="connectionStatus" class="ms-3">Disconnected</span>
    </div>

    <!-- Dashboard Section -->
    <div class="card mb-4" id="dashboard">
      <div class="card-header">
        Printer Dashboard
      </div>
      <div class="card-body">
        <div class="row mb-3">
          <div class="col-md-4">
            <strong>Status:</strong> <span id="printerStatus">Disconnected</span>
            <span id="statusIndicator" class="status-indicator bg-danger"></span>
          </div>
          <div class="col-md-4">
            <strong>Printer Name:</strong> <span id="printerName">Unknown</span>
          </div>
          <div class="col-md-4">
            <strong>IP Address:</strong> <span id="printerIP">N/A</span>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-4">
            <strong>Hotend Temperature:</strong> <span id="hotendTemp">0°C</span>
          </div>
          <div class="col-md-4">
            <strong>Bed Temperature:</strong> <span id="bedTemp">0°C</span>
          </div>
          <div class="col-md-4">
            <strong>Print Progress:</strong>
            <div id="printProgressContainer">
              <div id="printProgressBar"></div>
            </div>
            <span id="printProgressText">0%</span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <strong>Current GCODE:</strong> <span id="currentGcode">None</span>
          </div>
        </div>
      </div>
    </div>

    <!-- GCODE Input Section -->
    <div class="card mb-4">
      <div class="card-header">
        Send GCODE
      </div>
      <div class="card-body">
        <div class="input-group">
          <input type="text" id="gcodeInput" class="form-control" placeholder="Enter GCODE command">
          <button id="sendGcodeButton" class="btn btn-success">Send</button>
        </div>
        <!-- Display response from serial device -->
        <div id="gcodeResponse" class="mt-3 alert alert-info" style="display: none;"></div>
      </div>
    </div>

    <!-- Premade Sequences Buttons -->
    <div class="card mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <span>Premade Sequences</span>
        <div>
          <button id="exportScriptsButton" class="btn btn-sm btn-outline-primary me-2">Export Scripts</button>
          <button id="importScriptsButton" class="btn btn-sm btn-outline-secondary">Import Scripts</button>
          <input type="file" id="importFileInput" accept=".json" style="display: none;">
        </div>
      </div>
      <div class="card-body ">
        <div class="btn-group" role="group" aria-label="Premade Sequences" id="premadeSequencesGroup">
             <!-- Buttons will be dynamically added here -->
          <!--<button type="button" class="btn btn-secondary premade-sequence" data-sequence="Home All Axes"> Home All Axes </button>
          <button type="button" class="btn btn-secondary premade-sequence" data-sequence="Get IP">  Get IP   </button>
          <button type="button" class="btn btn-secondary premade-sequence" data-sequence="Start Print"> Start Print </button>
           Custom Scripts will be appended here -->
        </div> 
        <div class="py-0 px-1 my-0 border border-secondary">
           
                M587 S"YourSSID" P"YourPassword" ; Add a new Wi-Fi network with SSID and password
                <br>
                M552 S1     ; connect to wifi
                
               
        </div>
   
     
      </div>
  
    </div>
   

    <!-- Custom Script Section -->
    <div class="card mb-4" id="customScriptSection">
      <div class="card-header">
        Create Custom Script
      </div>
      <div class="card-body">
        <div class="mb-3">
          <label for="scriptName" class="form-label">Script Name</label>
          <input type="text" class="form-control" id="scriptName" placeholder="Enter script name">
        </div>
        <div class="mb-3">
          <label for="scriptGcodes" class="form-label">GCODE Commands</label>
          <textarea class="form-control" id="scriptGcodes" rows="5" placeholder="Enter GCODE commands, one per line"></textarea>
        </div>
        <button id="saveScriptButton" class="btn btn-primary">Save Script</button>
      </div>
    </div>

    <!-- CRON Scheduled Tasks Section -->
    <div class="card" id="cronTasksSection">
      <div class="card-header">
        CRON Scheduled Tasks
      </div>
      <div class="card-body">
        <div id="cronTasksList">
          <p>No scheduled tasks found.</p>
        </div>
      </div>
    </div>

  </div>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Main JavaScript-->
  <script src="js/gcoder.js"></script> 

  <script>
  



  </script>

  <!-- Additional JavaScript if needed -->
</body>
</html>
